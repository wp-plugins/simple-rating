var $j=jQuery,pcl,rating_wroking,numb;$j(".spr_rating_piece").mouseenter(function(e){rating_wroking=spr_ajax_object.rating_working;if(rating_wroking){pcl=[];numb=e.target.id;numb=parseInt(numb.replace("spr_piece_",""));for(var t=1;t<=spr_ajax_object.scale;t++){pcl[t]=$j("#spr_piece_"+t).attr("class").replace("spr_rating_piece ","")}for(var t=1;t<=spr_ajax_object.scale;t++){$j("#spr_piece_"+t).addClass("spr_"+spr_ajax_object.spr_type+"_empty")}$j(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_full_voting");$j(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_half_voting");for(t=1;t<=numb;t++){$j("#spr_piece_"+t).addClass("spr_"+spr_ajax_object.spr_type+"_full_voted")}}}).mouseleave(function(){if(rating_wroking){$j(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_full_voted");$j(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_half_voted");for(var e=1;e<=spr_ajax_object.scale;e++){$j("#spr_piece_"+e).addClass(pcl[e])}}});$j(".spr_rating_piece").click(function(e){rating_wroking=spr_ajax_object.rating_working;numb=e.target.id;numb=parseInt(numb.replace("spr_piece_",""));request={post_id:spr_ajax_object.post_id,points:numb,action:"spr_rate"};if(rating_wroking){if(numb>=1&&numb<=spr_ajax_object.scale){$j.ajax({type:"post",dataType:"json",url:spr_ajax_object.ajax_url,data:request,success:function(e){if(e.status==1){$j("#spr_visual_container").html(e.html);rating_wroking=false}else if(e.status==2){return false}}})}}})