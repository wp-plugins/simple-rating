var $j=jQuery,pcl,rating_working,numb;$j(document).ready(function(){$j("#spr_container_"+spr_ajax_object.post_id).children("#spr_shapes").children(".spr_rating_piece").mouseenter(function(e){if(rating_working=spr_ajax_object.rating_working){pcl=[],numb=e.target.id,numb=parseInt(numb.replace("spr_piece_",""));for(var t=1;t<=spr_ajax_object.scale;t++)pcl[t]=$j("#spr_piece_"+t).attr("class").replace("spr_rating_piece ","");for(var t=1;t<=spr_ajax_object.scale;t++)$j("#spr_piece_"+t).addClass("spr_"+spr_ajax_object.spr_type+"_empty");for($j("#spr_container_"+spr_ajax_object.post_id).children("#spr_shapes").children(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_full_voting"),$j("#spr_container_"+spr_ajax_object.post_id).children("#spr_shapes").children(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_half_voting"),t=1;numb>=t;t++)$j("#spr_piece_"+t).addClass("spr_"+spr_ajax_object.spr_type+"_full_voted")}}).mouseleave(function(){if(rating_working){$j("#spr_container_"+spr_ajax_object.post_id).children("#spr_shapes").children(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_full_voted"),$j("#spr_container_"+spr_ajax_object.post_id).children("#spr_shapes").children(".spr_rating_piece").removeClass("spr_"+spr_ajax_object.spr_type+"_half_voted");for(var e=1;e<=spr_ajax_object.scale;e++)$j("#spr_piece_"+e).addClass(pcl[e])}}),$j("#spr_container_"+spr_ajax_object.post_id).children("#spr_shapes").children(".spr_rating_piece").click(function(e){rating_working=spr_ajax_object.rating_working,numb=e.target.id,numb=parseInt(numb.replace("spr_piece_","")),request={post_id:spr_ajax_object.post_id,points:numb,action:"spr_rate"},rating_working&&numb>=1&&numb<=spr_ajax_object.scale&&$j.ajax({type:"post",dataType:"json",url:spr_ajax_object.ajax_url,data:request,success:function(e){if(1==e.status)$j("#spr_container_"+spr_ajax_object.post_id).html(e.html),rating_working=!1;else if(2==e.status)return!1}})})})